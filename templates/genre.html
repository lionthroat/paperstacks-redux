<!-- Receives dictionary 'genreinfo' with keys [genre_id, genre_name] -->
<!-- Receives dictionary 'books' with keys [isbn, book_title] -->
<!-- MAY receive 'error' if user tried to remove Genre that still had Books in it -->

{% extends 'layout.html' %}

{% block body %}
  {% for genre in genreinfo %}
    <div class="container mt-5 mb-5">
      <div class="row">
        {% if error is defined %}
          <ul>
            <li class="list-group-item bg-danger text-light"><h6>Error:</h6> This Genre cannot be removed while there are still Books associated with it. Please remove or reassign each Book, then try again.</li>
          </ul>
        {% endif %}
      </div>
      <h4 class="name">Genre: {{ genre['genre_name'] }}
      <div class="mt-3">
        {% if books|length %}
          <ul>
            {% for book in books %}
              <li class="list-group-item small"><a href="/book/{{ book['isbn'] }}">{{ book['book_title'] }}</a></li>
            {% endfor %}
          </ul>
        {% endif %}
      </div>

      <div>
        <button id="edit-genre-button" class="btn btn-primary mx-2 mt-2">Edit Genre</button>
        <form id="rem-genre" action="/rem_genre/{{ genre['genre_id'] }}" method="post">
          <button type="submit" id="rem-genre-button" class="btn btn-primary mx-2 mt-2">Remove Genre</button>
        </form>
      </div>

    </div>
  {% endfor%}
{% endblock %}
